# VishwaSetu: Your Global Language Bridge

VishwaSetu is a wise, patient, and friendly AI language teacher designed specifically for the diverse linguistic landscape of India. It uses the power of Google's Gemini models to bridge the gap between Indian native languages and world languages, focusing on making users "Country-Ready."

## ðŸš€ AI Models Used

This application leverages a dual-model architecture to provide both real-time voice interaction and grounded knowledge.

### 1. Real-Time Classroom: Gemini 2.5 Flash Native Audio

- **Model**: `gemini-2.5-flash-native-audio-preview-12-2025`
- **Purpose**: Powers the **Live Classroom** experience.
- **Capabilities**:
  - **Vocational Adaptation**: Tailors vocabulary for Construction, Driving, IT, Engineering, Healthcare, etc.
  - **Roleplay Simulations**: Features interactive scenarios like "Asking for Leave" or "Market Bargaining" to simulate real-life stress and success.
  - **Survival Curriculum**: Teaches practical phrases for work, navigation, and emergency survival.
  - **Broad Language Support**: Now supports Japanese (Nihongo) and English (US Accent) in addition to French, Spanish, Russian, Chinese, and Arabic.

### 2. Knowledge Hub: Gemini 3 Flash

- **Model**: `gemini-3-flash-preview`
- **Purpose**: Powers the **Cultural Knowledge Hub** with Google Search Grounding.

---

## ðŸ“± Application Overview

### Key Features

- **Job-Specific Context**: Vocabulary tailored to the user's career path.
- **Interactive Roleplay**: Dynamic simulations of workplace and social situations (e.g., Negotiating with a boss, shopping at a market).
- **Cultural Etiquette Integration**: Non-verbal cues and social protocols taught alongside grammar (e.g., bowing in Japan).
- **Country-Ready Curriculum**: Practical navigation, medical help, and daily transactions.
- **Voice-First Interaction**: Accessible, low-latency conversation for non-text-heavy learners.

---

## ðŸŒŸ Suggested Future Enhancements

### 1. **Visual Sign Bridge (Vision Integration)**

- **Feature**: Use the phone's camera to "see" work-site signs or safety manuals.
- **Benefit**: Real-time translation and explanation of safety signs in the user's native tongue.

### 2. **Emergency "Quick-Help" Mode**

- **Feature**: Instant access to emergency phrases like "I need a doctor."

### 3. **Dialect & Slang Support**

- **Feature**: Learning local nuances like Quebecois vs. Parisian French or British vs. US English.

### 4. **Progress Report Cards**

- **Feature**: A voice-based summary of learning achievements.

---

*VishwaSetu â€” Empowering India's workers and learners to conquer the world.*

---------------------------------------------------------------------------------

# Cultural Hub                                                                                                                  â”‚     â”‚ curl -X POST <http://localhost:3000/api/cultural/ask> \                                                                           â”‚     â”‚   -H "Content-Type: application/json" \                                                                                         â”‚     â”‚   -d '{"query": "What are workplace greetings in France?"}'                                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚ # Emergency Phrases                                                                                                             â”‚     â”‚ curl <http://localhost:3000/api/emergency/phrases?native=en&target=fr>                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚ # Visual Bridge (with base64 image)                                                                                             â”‚     â”‚ curl -X POST <http://localhost:3000/api/visual/translate> \                                                                       â”‚     â”‚   -H "Content-Type: application/json" \                                                                                         â”‚     â”‚   -d '{"imageBase64":"[base64-string]","nativeLanguage":"Telugu"}'                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ PHASE 2: Frontend Implementation                                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.1 Install Frontend Dependencies                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ npx expo install expo-camera expo-image-picker                                                                                  â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.2 Update app.json Configuration                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ Add camera and microphone permissions:                                                                                          â”‚     â”‚ {                                                                                                                               â”‚     â”‚   "expo": {                                                                                                                     â”‚     â”‚     "plugins": [                                                                                                                â”‚     â”‚       "expo-router",                                                                                                            â”‚     â”‚       ["expo-splash-screen", { ... }],                                                                                          â”‚     â”‚       "expo-secure-store",                                                                                                      â”‚     â”‚       ["expo-camera", {                                                                                                         â”‚     â”‚         "cameraPermission": "VishwaSetu needs camera access to translate signs.",                                               â”‚     â”‚         "microphonePermission": "VishwaSetu needs microphone for voice lessons.",                                               â”‚     â”‚         "recordAudioAndroid": true                                                                                              â”‚     â”‚       }],                                                                                                                       â”‚     â”‚       ["expo-image-picker", {                                                                                                   â”‚     â”‚         "photosPermission": "VishwaSetu needs photo library access."                                                            â”‚     â”‚       }]                                                                                                                        â”‚     â”‚     ]                                                                                                                           â”‚     â”‚   }                                                                                                                             â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.3 Create API Service Layer                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ services/api.ts:                                                                                                                â”‚     â”‚ import { useAuth } from '@clerk/clerk-expo';                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ const API_BASE = '<http://192.168.1.6:3000>'; // Update with your backend URL                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚ class ApiService {                                                                                                              â”‚     â”‚   private token: string | null = null;                                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚   setToken(token: string) {                                                                                                     â”‚     â”‚     this.token = token;                                                                                                         â”‚     â”‚   }                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚   // Cultural Hub                                                                                                               â”‚     â”‚   async askCultural(query: string) {                                                                                            â”‚     â”‚     const res = await fetch(`${API_BASE}/api/cultural/ask`, {                                                                   â”‚     â”‚       method: 'POST',                                                                                                           â”‚     â”‚       headers: { 'Content-Type': 'application/json' },                                                                          â”‚     â”‚       body: JSON.stringify({ query })                                                                                           â”‚     â”‚     });                                                                                                                         â”‚     â”‚     return res.json();                                                                                                          â”‚     â”‚   }                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚   // Visual Bridge                                                                                                              â”‚     â”‚   async translateImage(imageBase64: string, nativeLanguage: string) {                                                           â”‚     â”‚     const res = await fetch(`${API_BASE}/api/visual/translate`, {                                                               â”‚     â”‚       method: 'POST',                                                                                                           â”‚     â”‚       headers: { 'Content-Type': 'application/json' },                                                                          â”‚     â”‚       body: JSON.stringify({ imageBase64, nativeLanguage })                                                                     â”‚     â”‚     });                                                                                                                         â”‚     â”‚     return res.json();                                                                                                          â”‚     â”‚   }                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚   // Emergency Phrases                                                                                                          â”‚     â”‚   async getEmergencyPhrases(native: string, target: string, category?: string) {                                                â”‚     â”‚     const params = new URLSearchParams({ native, target });                                                                     â”‚     â”‚     if (category) params.append('category', category);                                                                          â”‚     â”‚     const res = await fetch(`${API_BASE}/api/emergency/phrases?${params}`);                                                     â”‚     â”‚     return res.json();                                                                                                          â”‚     â”‚   }                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚   // Classroom WebSocket                                                                                                        â”‚     â”‚   connectClassroom(userId: string): WebSocket {                                                                                 â”‚     â”‚     return new WebSocket(`ws://192.168.1.6:3000/classroom?userId=${userId}`);                                                   â”‚     â”‚   }                                                                                                                             â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ export const apiService = new ApiService();                                                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.4 Make Dashboard Cards Clickable                                                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚ Update app/(tabs)/home.tsx (lines 163-209):                                                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚ Add onPress handlers to each <View style={styles.featureCard}>:                                                                 â”‚     â”‚                                                                                                                                 â”‚     â”‚ // Line 163: Live Classroom                                                                                                     â”‚     â”‚ <Pressable                                                                                                                      â”‚     â”‚   style={styles.featureCard}                                                                                                    â”‚     â”‚   onPress={() => router.push('/(tabs)/classroom')}                                                                              â”‚     â”‚ >                                                                                                                               â”‚     â”‚   {/*existing content */}                                                                                                      â”‚     â”‚ </Pressable>                                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ // Line 175: Cultural Knowledge Hub                                                                                             â”‚     â”‚ <Pressable                                                                                                                      â”‚     â”‚   style={styles.featureCard}                                                                                                    â”‚     â”‚   onPress={() => router.push('/(tabs)/cultural-hub')}                                                                           â”‚     â”‚ >                                                                                                                               â”‚     â”‚   {/* existing content */}                                                                                                      â”‚     â”‚ </Pressable>                                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ // Line 187: Visual Sign Bridge                                                                                                 â”‚     â”‚ <Pressable                                                                                                                      â”‚     â”‚   style={styles.featureCard}                                                                                                    â”‚     â”‚   onPress={() => router.push('/(tabs)/visual-bridge')}                                                                          â”‚     â”‚ >                                                                                                                               â”‚     â”‚   {/* existing content */}                                                                                                      â”‚     â”‚ </Pressable>                                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ // Line 199: Emergency Quick-Help                                                                                               â”‚     â”‚ <Pressable                                                                                                                      â”‚     â”‚   style={styles.featureCard}                                                                                                    â”‚     â”‚   onPress={() => router.push('/(tabs)/emergency-help')}                                                                         â”‚     â”‚ >                                                                                                                               â”‚     â”‚   {/* existing content */}                                                                                                      â”‚     â”‚ </Pressable>                                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.5 Create Feature Screens                                                                                                      â”‚     â”‚                                                                                                                                 â”‚     â”‚ app/(tabs)/emergency-help.tsx - Simplest Feature                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ import { useState, useEffect } from 'react';                                                                                    â”‚     â”‚ import { View, Text, FlatList, Pressable, StyleSheet } from 'react-native';                                                     â”‚     â”‚ import { MaterialCommunityIcons } from '@expo/vector-icons';                                                                    â”‚     â”‚ import { apiService } from '../../services/api';                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ const CATEGORIES = ['medical', 'police', 'fire', 'lost', 'help'];                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ export default function EmergencyHelpScreen() {                                                                                 â”‚     â”‚   const [category, setCategory] = useState('medical');                                                                          â”‚     â”‚   const [phrases, setPhrases] = useState([]);                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚   useEffect(() => {                                                                                                             â”‚     â”‚     loadPhrases();                                                                                                              â”‚     â”‚   }, [category]);                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚   const loadPhrases = async () => {                                                                                             â”‚     â”‚     const data = await apiService.getEmergencyPhrases('en', 'fr', category);                                                    â”‚     â”‚     setPhrases(data.phrases);                                                                                                   â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   return (                                                                                                                      â”‚     â”‚     <View style={styles.container}>                                                                                             â”‚     â”‚       {/* Category tabs */}                                                                                                     â”‚     â”‚       <View style={styles.tabsContainer}>                                                                                       â”‚     â”‚         {CATEGORIES.map(cat => (                                                                                                â”‚     â”‚           <Pressable                                                                                                            â”‚     â”‚             key={cat}                                                                                                           â”‚     â”‚             style={[styles.tab, category === cat && styles.activeTab]}                                                          â”‚     â”‚             onPress={() => setCategory(cat)}                                                                                    â”‚     â”‚           >                                                                                                                     â”‚     â”‚             <Text style={[styles.tabText, category === cat && styles.activeTabText]}>                                           â”‚     â”‚               {cat.toUpperCase()}                                                                                               â”‚     â”‚             </Text>                                                                                                             â”‚     â”‚           </Pressable>                                                                                                          â”‚     â”‚         ))}                                                                                                                     â”‚     â”‚       </View>                                                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚       {/* Phrase list*/}                                                                                                       â”‚     â”‚       <FlatList                                                                                                                 â”‚     â”‚         data={phrases}                                                                                                          â”‚     â”‚         renderItem={({ item }) => (                                                                                             â”‚     â”‚           <View style={styles.phraseCard}>                                                                                      â”‚     â”‚             <Text style={styles.nativeText}>{item.nativeText}</Text>                                                            â”‚     â”‚             <Text style={styles.targetText}>{item.targetText}</Text>                                                            â”‚     â”‚             <Text style={styles.pronunciation}>{item.pronunciation}</Text>                                                      â”‚     â”‚           </View>                                                                                                               â”‚     â”‚         )}                                                                                                                      â”‚     â”‚         keyExtractor={(item) => item.id}                                                                                        â”‚     â”‚       />                                                                                                                        â”‚     â”‚     </View>                                                                                                                     â”‚     â”‚   );                                                                                                                            â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ const styles = StyleSheet.create({                                                                                              â”‚     â”‚   container: {                                                                                                                  â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     backgroundColor: '#F0FFF4',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   tabsContainer: {                                                                                                              â”‚     â”‚     flexDirection: 'row',                                                                                                       â”‚     â”‚     backgroundColor: '#FFFFFF',                                                                                                 â”‚     â”‚     padding: 8,                                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   tab: {                                                                                                                        â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     paddingVertical: 12,                                                                                                        â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   activeTab: {                                                                                                                  â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   tabText: {                                                                                                                    â”‚     â”‚     fontSize: 12,                                                                                                               â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚     color: '#687076',                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   activeTabText: {                                                                                                              â”‚     â”‚     color: '#FFFFFF',                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   phraseCard: {                                                                                                                 â”‚     â”‚     backgroundColor: '#F9FFFB',                                                                                                 â”‚     â”‚     margin: 12,                                                                                                                 â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     borderRadius: 12,                                                                                                           â”‚     â”‚     borderLeftWidth: 4,                                                                                                         â”‚     â”‚     borderLeftColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   nativeText: {                                                                                                                 â”‚     â”‚     fontSize: 18,                                                                                                               â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚     color: '#10B981',                                                                                                           â”‚     â”‚     marginBottom: 8,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   targetText: {                                                                                                                 â”‚     â”‚     fontSize: 24,                                                                                                               â”‚     â”‚     fontWeight: 'bold',                                                                                                         â”‚     â”‚     color: '#1F2937',                                                                                                           â”‚     â”‚     marginBottom: 4,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   pronunciation: {                                                                                                              â”‚     â”‚     fontSize: 14,                                                                                                               â”‚     â”‚     color: '#687076',                                                                                                           â”‚     â”‚     fontStyle: 'italic',                                                                                                        â”‚     â”‚   },                                                                                                                            â”‚     â”‚ });                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ app/(tabs)/cultural-hub.tsx                                                                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚ import { useState } from 'react';                                                                                               â”‚     â”‚ import { View, TextInput, Pressable, Text, ScrollView, StyleSheet, Linking } from 'react-native';                               â”‚     â”‚ import { apiService } from '../../services/api';                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ export default function CulturalHubScreen() {                                                                                   â”‚     â”‚   const [query, setQuery] = useState('');                                                                                       â”‚     â”‚   const [loading, setLoading] = useState(false);                                                                                â”‚     â”‚   const [result, setResult] = useState<any>(null);                                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚   const handleSearch = async () => {                                                                                            â”‚     â”‚     if (!query.trim()) return;                                                                                                  â”‚     â”‚     setLoading(true);                                                                                                           â”‚     â”‚     const data = await apiService.askCultural(query);                                                                           â”‚     â”‚     setResult(data);                                                                                                            â”‚     â”‚     setLoading(false);                                                                                                          â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   return (                                                                                                                      â”‚     â”‚     <ScrollView style={styles.container} contentContainerStyle={styles.content}>                                                â”‚     â”‚       <View style={styles.searchBox}>                                                                                           â”‚     â”‚         <TextInput                                                                                                              â”‚     â”‚           style={styles.input}                                                                                                  â”‚     â”‚           placeholder="Ask about culture, workplace norms..."                                                                   â”‚     â”‚           value={query}                                                                                                         â”‚     â”‚           onChangeText={setQuery}                                                                                               â”‚     â”‚           placeholderTextColor="#9CA3AF"                                                                                        â”‚     â”‚         />                                                                                                                      â”‚     â”‚         <Pressable                                                                                                              â”‚     â”‚           style={styles.searchButton}                                                                                           â”‚     â”‚           onPress={handleSearch}                                                                                                â”‚     â”‚           disabled={loading}                                                                                                    â”‚     â”‚         >                                                                                                                       â”‚     â”‚           <Text style={styles.searchButtonText}>                                                                                â”‚     â”‚             {loading ? 'Searching...' : 'Search'}                                                                               â”‚     â”‚           </Text>                                                                                                               â”‚     â”‚         </Pressable>                                                                                                            â”‚     â”‚       </View>                                                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚       {result && (                                                                                                              â”‚     â”‚         <View style={styles.resultCard}>                                                                                        â”‚     â”‚           <Text style={styles.resultText}>{result.text}</Text>                                                                  â”‚     â”‚                                                                                                                                 â”‚     â”‚           {result.sources?.length > 0 && (                                                                                      â”‚     â”‚             <View style={styles.sourcesContainer}>                                                                              â”‚     â”‚               <Text style={styles.sourcesTitle}>Sources:</Text>                                                                 â”‚     â”‚               {result.sources.map((source: any, i: number) => (                                                                 â”‚     â”‚                 <Pressable                                                                                                      â”‚     â”‚                   key={i}                                                                                                       â”‚     â”‚                   onPress={() => Linking.openURL(source.uri)}                                                                   â”‚     â”‚                   style={styles.sourceLink}                                                                                     â”‚     â”‚                 >                                                                                                               â”‚     â”‚                   <Text style={styles.sourceLinkText}>{source.title}</Text>                                                     â”‚     â”‚                 </Pressable>                                                                                                    â”‚     â”‚               ))}                                                                                                               â”‚     â”‚             </View>                                                                                                             â”‚     â”‚           )}                                                                                                                    â”‚     â”‚         </View>                                                                                                                 â”‚     â”‚       )}                                                                                                                        â”‚     â”‚     </ScrollView>                                                                                                               â”‚     â”‚   );                                                                                                                            â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ const styles = StyleSheet.create({                                                                                              â”‚     â”‚   container: {                                                                                                                  â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     backgroundColor: '#F0FFF4',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   content: {                                                                                                                    â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚   },                                                                                                                            â”‚     â”‚   searchBox: {                                                                                                                  â”‚     â”‚     backgroundColor: '#FFFFFF',                                                                                                 â”‚     â”‚     borderRadius: 12,                                                                                                           â”‚     â”‚     padding: 12,                                                                                                                â”‚     â”‚     marginBottom: 16,                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   input: {                                                                                                                      â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     padding: 12,                                                                                                                â”‚     â”‚     backgroundColor: '#F9FAFB',                                                                                                 â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚     marginBottom: 12,                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   searchButton: {                                                                                                               â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚   },                                                                                                                            â”‚     â”‚   searchButtonText: {                                                                                                           â”‚     â”‚     color: '#FFFFFF',                                                                                                           â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚   },                                                                                                                            â”‚     â”‚   resultCard: {                                                                                                                 â”‚     â”‚     backgroundColor: '#F9FFFB',                                                                                                 â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     borderRadius: 12,                                                                                                           â”‚     â”‚     borderLeftWidth: 4,                                                                                                         â”‚     â”‚     borderLeftColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   resultText: {                                                                                                                 â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     lineHeight: 24,                                                                                                             â”‚     â”‚     color: '#1F2937',                                                                                                           â”‚     â”‚     marginBottom: 16,                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sourcesContainer: {                                                                                                          â”‚

     â”‚     borderTopWidth: 1,                                                                                                          â”‚     â”‚     borderTopColor: '#E5E7EB',                                                                                                  â”‚     â”‚     paddingTop: 12,                                                                                                             â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sourcesTitle: {                                                                                                               â”‚     â”‚     fontSize: 12,                                                                                                               â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚     color: '#6B7280',                                                                                                           â”‚     â”‚     marginBottom: 8,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sourceLink: {                                                                                                                 â”‚     â”‚     paddingVertical: 8,                                                                                                         â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sourceLinkText: {                                                                                                             â”‚     â”‚     fontSize: 14,                                                                                                               â”‚     â”‚     color: '#10B981',                                                                                                           â”‚     â”‚     textDecorationLine: 'underline',                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚ });                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ app/(tabs)/visual-bridge.tsx                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ import { useState } from 'react';                                                                                               â”‚     â”‚ import { View, Text, Pressable, StyleSheet, Image } from 'react-native';                                                        â”‚     â”‚ import { CameraView, useCameraPermissions } from 'expo-camera';                                                                 â”‚     â”‚ import * as ImagePicker from 'expo-image-picker';                                                                               â”‚     â”‚ import { apiService } from '../../services/api';                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ export default function VisualBridgeScreen() {                                                                                  â”‚     â”‚   const [permission, requestPermission] = useCameraPermissions();                                                               â”‚     â”‚   const [result, setResult] = useState<any>(null);                                                                              â”‚     â”‚   const [loading, setLoading] = useState(false);                                                                               â”‚
     â”‚                                                                                                                                 â”‚     â”‚   const capturePhoto = async () => {                                                                                            â”‚     â”‚     // Camera capture logic                                                                                                     â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   const pickImage = async () => {                                                                                               â”‚     â”‚     const result = await ImagePicker.launchImageLibraryAsync({                                                                  â”‚     â”‚       mediaTypes: ImagePicker.MediaTypeOptions.Images,                                                                          â”‚     â”‚       base64: true,                                                                                                             â”‚     â”‚       quality: 0.7,                                                                                                             â”‚     â”‚     });                                                                                                                         â”‚     â”‚                                                                                                                                 â”‚     â”‚     if (!result.canceled && result.assets[0].base64) {                                                                          â”‚     â”‚       setLoading(true);                                                                                                         â”‚     â”‚       const translation = await apiService.translateImage(result.assets[0].base64, 'Telugu');                                   â”‚     â”‚       setResult(translation);                                                                                                   â”‚     â”‚       setLoading(false);                                                                                                        â”‚     â”‚     }                                                                                                                           â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   if (!permission?.granted) {                                                                                                   â”‚     â”‚     return (                                                                                                                    â”‚     â”‚       <View style={styles.container}>                                                                                           â”‚     â”‚         <Text>Camera permission required</Text>                                                                                 â”‚     â”‚         <Pressable style={styles.button} onPress={requestPermission}>                                                           â”‚     â”‚           <Text style={styles.buttonText}>Grant Permission</Text>                                                               â”‚     â”‚         </Pressable>                                                                                                            â”‚     â”‚       </View>                                                                                                                   â”‚     â”‚     );                                                                                                                          â”‚     â”‚   }                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚   return (                                                                                                                      â”‚     â”‚     <View style={styles.container}>                                                                                             â”‚     â”‚       {/* Camera view implementation */}                                                                                        â”‚     â”‚       <Pressable style={styles.galleryButton} onPress={pickImage}>                                                              â”‚     â”‚         <Text style={styles.buttonText}>Pick from Gallery</Text>                                                                â”‚     â”‚       </Pressable>                                                                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚       {result && (                                                                                                              â”‚     â”‚         <View style={styles.resultOverlay}>                                                                                     â”‚     â”‚           <Text style={styles.resultText}>{result.translatedText}</Text>                                                        â”‚     â”‚           <Pressable style={styles.closeButton} onPress={() => setResult(null)}>                                                â”‚     â”‚             <Text style={styles.buttonText}>Close</Text>                                                                        â”‚     â”‚           </Pressable>                                                                                                          â”‚     â”‚         </View>                                                                                                                 â”‚     â”‚       )}                                                                                                                        â”‚     â”‚     </View>                                                                                                                     â”‚     â”‚   );                                                                                                                            â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ const styles = StyleSheet.create({                                                                                              â”‚     â”‚   container: {                                                                                                                  â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     backgroundColor: '#F0FFF4',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   button: {                                                                                                                     â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     margin: 16,                                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   buttonText: {                                                                                                                 â”‚     â”‚     color: '#FFFFFF',                                                                                                           â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚   },                                                                                                                            â”‚     â”‚   galleryButton: {                                                                                                              â”‚     â”‚     position: 'absolute',                                                                                                       â”‚     â”‚     bottom: 100,                                                                                                                â”‚     â”‚     left: 20,                                                                                                                   â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   resultOverlay: {                                                                                                              â”‚     â”‚     position: 'absolute',                                                                                                       â”‚     â”‚     top: 100,                                                                                                                   â”‚     â”‚     left: 20,                                                                                                                   â”‚     â”‚     right: 20,                                                                                                                  â”‚     â”‚     backgroundColor: '#FFFFFF',                                                                                                 â”‚     â”‚     padding: 20,                                                                                                                â”‚     â”‚     borderRadius: 12,                                                                                                           â”‚     â”‚     borderLeftWidth: 4,                                                                                                         â”‚     â”‚     borderLeftColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   resultText: {                                                                                                                 â”‚     â”‚     fontSize: 18,                                                                                                               â”‚     â”‚     color: '#1F2937',                                                                                                           â”‚     â”‚     marginBottom: 16,                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   closeButton: {                                                                                                                â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚     padding: 12,                                                                                                                â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚   },                                                                                                                            â”‚     â”‚ });                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ app/(tabs)/classroom.tsx - Most Complex                                                                                         â”‚     â”‚                                                                                                                                 â”‚     â”‚ import { useState, useEffect, useRef } from 'react';                                                                            â”‚     â”‚ import { View, Text, Pressable, ScrollView, StyleSheet } from 'react-native';                                                   â”‚     â”‚ import { Audio } from 'expo-audio';                                                                                             â”‚     â”‚ import { MaterialCommunityIcons } from '@expo/vector-icons';                                                                    â”‚     â”‚ import { apiService } from '../../services/api';                                                                                â”‚     â”‚ import { useUser } from '@clerk/clerk-expo';                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ interface Message {                                                                                                             â”‚     â”‚   role: 'user' | 'vishwa';                                                                                                      â”‚     â”‚   text: string;                                                                                                                 â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ export default function ClassroomScreen() {                                                                                     â”‚     â”‚   const { user } = useUser();                                                                                                   â”‚     â”‚   const [isActive, setIsActive] = useState(false);                                                                              â”‚     â”‚   const [messages, setMessages] = useState<Message[]>([]);                                                                      â”‚     â”‚   const [currentInput, setCurrentInput] = useState('');                                                                         â”‚     â”‚   const [currentOutput, setCurrentOutput] = useState('');                                                                       â”‚     â”‚                                                                                                                                 â”‚     â”‚   const wsRef = useRef<WebSocket | null>(null);                                                                                 â”‚     â”‚   const recordingRef = useRef<Audio.Recording | null>(null);                                                                    â”‚     â”‚   const scrollRef = useRef<ScrollView>(null);                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚   const startSession = async () => {                                                                                            â”‚     â”‚     // Request permissions                                                                                                      â”‚     â”‚     const { granted } = await Audio.requestPermissionsAsync();                                                                  â”‚     â”‚     if (!granted) {                                                                                                             â”‚     â”‚       alert('Microphone permission required');                                                                                  â”‚     â”‚       return;                                                                                                                   â”‚     â”‚     }                                                                                                                           â”‚     â”‚                                                                                                                                 â”‚     â”‚     // Configure audio mode                                                                                                     â”‚     â”‚     await Audio.setAudioModeAsync({                                                                                             â”‚     â”‚       allowsRecordingIOS: true,                                                                                                 â”‚     â”‚       playsInSilentModeIOS: true,                                                                                               â”‚     â”‚       shouldDuckAndroid: true,                                                                                                  â”‚     â”‚       playThroughEarpieceAndroid: false,                                                                                        â”‚     â”‚     });                                                                                                                         â”‚     â”‚                                                                                                                                 â”‚     â”‚     // Connect WebSocket                                                                                                        â”‚     â”‚     const ws = apiService.connectClassroom(user?.id || 'anonymous');                                                            â”‚     â”‚     wsRef.current = ws;                                                                                                         â”‚     â”‚                                                                                                                                 â”‚     â”‚     ws.onopen = () => {                                                                                                         â”‚     â”‚       setIsActive(true);                                                                                                        â”‚     â”‚       startRecording();                                                                                                         â”‚     â”‚     };                                                                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚     ws.onmessage = (event) => {                                                                                                 â”‚     â”‚       const data = JSON.parse(event.data);                                                                                      â”‚     â”‚                                                                                                                                 â”‚     â”‚       if (data.type === 'input_transcript') {                                                                                   â”‚     â”‚         setCurrentInput(prev => prev + data.text);                                                                              â”‚     â”‚       } else if (data.type === 'output_transcript') {                                                                           â”‚     â”‚         setCurrentOutput(prev => prev + data.text);                                                                             â”‚     â”‚       } else if (data.type === 'turn_complete') {                                                                               â”‚     â”‚         if (currentInput) setMessages(prev => [...prev, { role: 'user', text: currentInput }]);                                 â”‚     â”‚         if (currentOutput) setMessages(prev => [...prev, { role: 'vishwa', text: currentOutput }]);                             â”‚     â”‚         setCurrentInput('');                                                                                                    â”‚     â”‚         setCurrentOutput('');                                                                                                   â”‚     â”‚       } else if (data.type === 'audio') {                                                                                       â”‚     â”‚         // Play audio chunk                                                                                                     â”‚     â”‚         playAudioChunk(data.data);                                                                                              â”‚     â”‚       }                                                                                                                         â”‚     â”‚     };                                                                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚     ws.onerror = (error) => console.error('WS Error:', error);                                                                  â”‚     â”‚     ws.onclose = () => stopSession();                                                                                           â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   const startRecording = async () => {                                                                                          â”‚     â”‚     const recording = new Audio.Recording();                                                                                    â”‚     â”‚     await recording.prepareToRecordAsync({                                                                                      â”‚     â”‚       ...Audio.RecordingOptionsPresets.HIGH_QUALITY,                                                                            â”‚     â”‚       ios: {                                                                                                                    â”‚     â”‚         extension: '.caf',                                                                                                      â”‚     â”‚         outputFormat: Audio.IOSOutputFormat.LINEARPCM,                                                                          â”‚     â”‚         audioQuality: Audio.IOSAudioQuality.HIGH,                                                                               â”‚     â”‚         sampleRate: 16000,                                                                                                      â”‚     â”‚         numberOfChannels: 1,                                                                                                    â”‚     â”‚         bitRate: 128000,                                                                                                        â”‚     â”‚         linearPCMBitDepth: 16,                                                                                                  â”‚     â”‚         linearPCMIsBigEndian: false,                                                                                            â”‚     â”‚         linearPCMIsFloat: false,                                                                                                â”‚     â”‚       },                                                                                                                        â”‚     â”‚     });                                                                                                                         â”‚     â”‚     await recording.startAsync();                                                                                               â”‚     â”‚     recordingRef.current = recording;                                                                                           â”‚     â”‚                                                                                                                                 â”‚     â”‚     // Send audio chunks periodically                                                                                           â”‚     â”‚     setInterval(async () => {                                                                                                   â”‚     â”‚       if (recordingRef.current) {                                                                                               â”‚     â”‚         const uri = recordingRef.current.getURI();                                                                              â”‚     â”‚         // Read and send audio data via WebSocket                                                                               â”‚     â”‚       }                                                                                                                         â”‚     â”‚     }, 200);                                                                                                                    â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   const playAudioChunk = async (base64Audio: string) => {                                                                       â”‚     â”‚     // Implement audio playback with expo-audio                                                                                 â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   const stopSession = () => {                                                                                                   â”‚     â”‚     wsRef.current?.close();                                                                                                     â”‚     â”‚     recordingRef.current?.stopAndUnloadAsync();                                                                                 â”‚     â”‚     setIsActive(false);                                                                                                         â”‚     â”‚   };                                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚   // Auto-scroll on new message                                                                                                 â”‚     â”‚   useEffect(() => {                                                                                                             â”‚     â”‚     scrollRef.current?.scrollToEnd({ animated: true });                                                                         â”‚     â”‚   }, [messages]);                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚   return (                                                                                                                      â”‚     â”‚     <View style={styles.container}>                                                                                             â”‚     â”‚       {/* Header */}                                                                                                            â”‚     â”‚       <View style={styles.header}>                                                                                              â”‚     â”‚         <Text style={styles.headerTitle}>Live Classroom</Text>                                                                  â”‚     â”‚         <Pressable                                                                                                              â”‚     â”‚           style={[styles.sessionButton, isActive && styles.sessionButtonActive]}                                                â”‚     â”‚           onPress={isActive ? stopSession : startSession}                                                                       â”‚     â”‚         >                                                                                                                       â”‚     â”‚           <MaterialCommunityIcons                                                                                               â”‚     â”‚             name={isActive ? 'stop' : 'microphone'}                                                                             â”‚     â”‚             size={24}                                                                                                           â”‚     â”‚             color="#FFFFFF"                                                                                                     â”‚     â”‚           />                                                                                                                    â”‚     â”‚           <Text style={styles.sessionButtonText}>                                                                               â”‚     â”‚             {isActive ? 'Stop Class' : 'Start Learning'}                                                                        â”‚     â”‚           </Text>                                                                                                               â”‚     â”‚         </Pressable>                                                                                                            â”‚     â”‚       </View>                                                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚       {/* Messages */}                                                                                                          â”‚     â”‚       <ScrollView                                                                                                               â”‚     â”‚         ref={scrollRef}                                                                                                         â”‚     â”‚         style={styles.messagesContainer}                                                                                        â”‚     â”‚         contentContainerStyle={styles.messagesContent}                                                                          â”‚     â”‚       >                                                                                                                         â”‚     â”‚         {messages.length === 0 && (                                                                                             â”‚     â”‚           <View style={styles.emptyState}>                                                                                      â”‚     â”‚             <MaterialCommunityIcons name="microphone-outline" size={64} color="#10B981" opacity={0.3} />                        â”‚     â”‚             <Text style={styles.emptyText}>                                                                                     â”‚     â”‚               Namaste! Click "Start Learning" to begin your language journey.                                                   â”‚     â”‚             </Text>                                                                                                             â”‚     â”‚           </View>                                                                                                               â”‚     â”‚         )}                                                                                                                      â”‚     â”‚                                                                                                                                 â”‚     â”‚         {messages.map((msg, i) => (                                                                                             â”‚     â”‚           <View                                                                                                                 â”‚     â”‚             key={i}                                                                                                             â”‚     â”‚             style={[                                                                                                            â”‚     â”‚               styles.messageBubble,                                                                                             â”‚     â”‚               msg.role === 'user' ? styles.userBubble : styles.vishwaBubble                                                     â”‚     â”‚             ]}                                                                                                                  â”‚     â”‚           >                                                                                                                     â”‚     â”‚             <Text style={styles.messageRole}>                                                                                   â”‚     â”‚               {msg.role === 'user' ? 'You' : 'VishwaSetu'}                                                                      â”‚     â”‚             </Text>                                                                                                             â”‚     â”‚             <Text style={styles.messageText}>{msg.text}</Text>                                                                  â”‚     â”‚           </View>                                                                                                               â”‚     â”‚         ))}                                                                                                                     â”‚     â”‚                                                                                                                                 â”‚     â”‚         {/* Current transcripts */}                                                                                             â”‚     â”‚         {currentInput && (                                                                                                      â”‚     â”‚           <View style={[styles.messageBubble, styles.userBubble, styles.transcribing]}>                                         â”‚     â”‚             <Text style={styles.transcribingLabel}>Listening...</Text>                                                          â”‚     â”‚             <Text style={styles.messageText}>{currentInput}</Text>                                                              â”‚     â”‚           </View>                                                                                                               â”‚     â”‚         )}                                                                                                                      â”‚     â”‚         {currentOutput && (                                                                                                     â”‚     â”‚           <View style={[styles.messageBubble, styles.vishwaBubble, styles.transcribing]}>                                       â”‚     â”‚             <Text style={styles.transcribingLabel}>Speaking...</Text>                                                           â”‚     â”‚             <Text style={styles.messageText}>{currentOutput}</Text>                                                             â”‚     â”‚           </View>                                                                                                               â”‚     â”‚         )}                                                                                                                      â”‚     â”‚       </ScrollView>                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚       {/* Live indicator */}                                                                                                    â”‚     â”‚       {isActive && (                                                                                                            â”‚     â”‚         <View style={styles.liveIndicator}>                                                                                     â”‚     â”‚           <View style={styles.liveDot} />                                                                                       â”‚     â”‚           <Text style={styles.liveText}>CLASS IS LIVE</Text>                                                                    â”‚     â”‚         </View>                                                                                                                 â”‚     â”‚       )}                                                                                                                        â”‚     â”‚     </View>                                                                                                                     â”‚     â”‚   );                                                                                                                            â”‚     â”‚ }                                                                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ const styles = StyleSheet.create({                                                                                              â”‚     â”‚   container: {                                                                                                                  â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     backgroundColor: '#F0FFF4',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   header: {                                                                                                                     â”‚     â”‚     flexDirection: 'row',                                                                                                       â”‚     â”‚     justifyContent: 'space-between',                                                                                            â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     backgroundColor: '#FFFFFF',                                                                                                 â”‚     â”‚     borderBottomWidth: 1,                                                                                                       â”‚     â”‚     borderBottomColor: '#E5E7EB',                                                                                               â”‚     â”‚   },                                                                                                                            â”‚     â”‚   headerTitle: {                                                                                                                â”‚     â”‚     fontSize: 20,                                                                                                               â”‚     â”‚     fontWeight: 'bold',                                                                                                         â”‚     â”‚     color: '#10B981',                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sessionButton: {                                                                                                              â”‚     â”‚     flexDirection: 'row',                                                                                                       â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚     paddingHorizontal: 16,                                                                                                      â”‚     â”‚     paddingVertical: 12,                                                                                                        â”‚     â”‚     borderRadius: 8,                                                                                                            â”‚     â”‚     gap: 8,                                                                                                                     â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sessionButtonActive: {                                                                                                        â”‚     â”‚     backgroundColor: '#EF4444',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   sessionButtonText: {                                                                                                          â”‚     â”‚     color: '#FFFFFF',                                                                                                           â”‚     â”‚     fontWeight: '600',                                                                                                          â”‚     â”‚   },                                                                                                                            â”‚     â”‚   messagesContainer: {                                                                                                          â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚   },                                                                                                                            â”‚     â”‚   messagesContent: {                                                                                                            â”‚     â”‚     padding: 16,                                                                                                                â”‚     â”‚     gap: 12,                                                                                                                    â”‚     â”‚   },                                                                                                                            â”‚     â”‚   emptyState: {                                                                                                                 â”‚     â”‚     flex: 1,                                                                                                                    â”‚     â”‚     justifyContent: 'center',                                                                                                   â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     paddingVertical: 100,                                                                                                       â”‚     â”‚   },                                                                                                                            â”‚     â”‚   emptyText: {                                                                                                                  â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     color: '#687076',                                                                                                           â”‚     â”‚     textAlign: 'center',                                                                                                        â”‚     â”‚     marginTop: 16,                                                                                                              â”‚     â”‚     paddingHorizontal: 40,                                                                                                      â”‚     â”‚   },                                                                                                                            â”‚     â”‚   messageBubble: {                                                                                                              â”‚     â”‚     maxWidth: '85%',                                                                                                            â”‚     â”‚     padding: 12,                                                                                                                â”‚     â”‚     borderRadius: 12,                                                                                                           â”‚     â”‚     marginVertical: 4,                                                                                                          â”‚     â”‚   },                                                                                                                            â”‚     â”‚   userBubble: {                                                                                                                 â”‚     â”‚     alignSelf: 'flex-end',                                                                                                      â”‚     â”‚     backgroundColor: '#F9FFFB',                                                                                                 â”‚     â”‚     borderLeftWidth: 4,                                                                                                         â”‚     â”‚     borderLeftColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   vishwaBubble: {                                                                                                               â”‚     â”‚     alignSelf: 'flex-start',                                                                                                    â”‚     â”‚     backgroundColor: '#F3F4F6',                                                                                                 â”‚     â”‚     borderRightWidth: 4,                                                                                                        â”‚     â”‚     borderRightColor: '#6B7280',                                                                                                â”‚     â”‚   },                                                                                                                            â”‚     â”‚   transcribing: {                                                                                                               â”‚     â”‚     opacity: 0.6,                                                                                                               â”‚     â”‚   },                                                                                                                            â”‚     â”‚   messageRole: {                                                                                                                â”‚     â”‚     fontSize: 10,                                                                                                               â”‚     â”‚     fontWeight: 'bold',                                                                                                         â”‚     â”‚     textTransform: 'uppercase',                                                                                                 â”‚     â”‚     color: '#6B7280',                                                                                                           â”‚     â”‚     marginBottom: 4,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   transcribingLabel: {                                                                                                          â”‚     â”‚     fontSize: 10,                                                                                                               â”‚     â”‚     fontWeight: 'bold',                                                                                                         â”‚     â”‚     color: '#10B981',                                                                                                           â”‚     â”‚     marginBottom: 4,                                                                                                            â”‚     â”‚   },                                                                                                                            â”‚     â”‚   messageText: {                                                                                                                â”‚     â”‚     fontSize: 16,                                                                                                               â”‚     â”‚     lineHeight: 22,                                                                                                             â”‚     â”‚     color: '#1F2937',                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚   liveIndicator: {                                                                                                              â”‚     â”‚     position: 'absolute',                                                                                                       â”‚     â”‚     bottom: 20,                                                                                                                 â”‚     â”‚     alignSelf: 'center',                                                                                                        â”‚     â”‚     flexDirection: 'row',                                                                                                       â”‚     â”‚     alignItems: 'center',                                                                                                       â”‚     â”‚     backgroundColor: '#FFFFFF',                                                                                                 â”‚     â”‚     paddingHorizontal: 16,                                                                                                      â”‚     â”‚     paddingVertical: 8,                                                                                                         â”‚     â”‚     borderRadius: 20,                                                                                                           â”‚     â”‚     shadowColor: '#000',                                                                                                        â”‚     â”‚     shadowOffset: { width: 0, height: 2 },                                                                                      â”‚     â”‚     shadowOpacity: 0.2,                                                                                                         â”‚     â”‚     shadowRadius: 4,                                                                                                            â”‚     â”‚     elevation: 4,                                                                                                               â”‚     â”‚     gap: 8,                                                                                                                     â”‚     â”‚   },                                                                                                                            â”‚     â”‚   liveDot: {                                                                                                                    â”‚     â”‚     width: 10,                                                                                                                  â”‚     â”‚     height: 10,                                                                                                                 â”‚     â”‚     borderRadius: 5,                                                                                                            â”‚     â”‚     backgroundColor: '#10B981',                                                                                                 â”‚     â”‚   },                                                                                                                            â”‚     â”‚   liveText: {                                                                                                                   â”‚     â”‚     fontSize: 12,                                                                                                               â”‚     â”‚     fontWeight: '700',                                                                                                          â”‚     â”‚     color: '#10B981',                                                                                                           â”‚     â”‚   },                                                                                                                            â”‚     â”‚ });                                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ 2.6 Update Navigation Layout                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ app/(tabs)/_layout.tsx - Add new screen routes:                                                                                 â”‚     â”‚ <Stack>                                                                                                                         â”‚     â”‚   {/* Existing screens */}                                                                                                      â”‚     â”‚   <Stack.Screen name="index" options={{ headerShown: false }} />                                                                â”‚     â”‚   <Stack.Screen name="home" options={{ headerShown: false }} />                                                                 â”‚     â”‚   <Stack.Screen name="profile" options={{ headerShown: false }} />                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚   {/* New feature screens */}                                                                                                   â”‚     â”‚   <Stack.Screen                                                                                                                 â”‚     â”‚     name="classroom"                                                                                                            â”‚     â”‚     options={{                                                                                                                  â”‚     â”‚       title: 'Live Classroom',                                                                                                  â”‚     â”‚       headerStyle: { backgroundColor: '#F0FFF4' },                                                                              â”‚     â”‚       headerTintColor: '#10B981'                                                                                                â”‚     â”‚     }}                                                                                                                          â”‚     â”‚   />                                                                                                                            â”‚     â”‚   <Stack.Screen                                                                                                                 â”‚     â”‚     name="cultural-hub"                                                                                                         â”‚     â”‚     options={{                                                                                                                  â”‚     â”‚       title: 'Cultural Knowledge Hub',                                                                                          â”‚     â”‚       headerStyle: { backgroundColor: '#F0FFF4' },                                                                              â”‚     â”‚       headerTintColor: '#10B981'                                                                                                â”‚     â”‚     }}                                                                                                                          â”‚     â”‚   />                                                                                                                            â”‚     â”‚   <Stack.Screen                                                                                                                 â”‚     â”‚     name="visual-bridge"                                                                                                        â”‚     â”‚     options={{                                                                                                                  â”‚     â”‚       title: 'Visual Sign Bridge',                                                                                              â”‚     â”‚       headerStyle: { backgroundColor: '#F0FFF4' },                                                                              â”‚     â”‚       headerTintColor: '#10B981'                                                                                                â”‚     â”‚     }}                                                                                                                          â”‚     â”‚   />                                                                                                                            â”‚     â”‚   <Stack.Screen                                                                                                                 â”‚     â”‚     name="emergency-help"                                                                                                       â”‚     â”‚     options={{                                                                                                                  â”‚     â”‚       title: 'Emergency Quick-Help',                                                                                            â”‚     â”‚       headerStyle: { backgroundColor: '#F0FFF4' },                                                                              â”‚     â”‚       headerTintColor: '#10B981'                                                                                                â”‚     â”‚     }}                                                                                                                          â”‚     â”‚   />                                                                                                                            â”‚     â”‚ </Stack>                                                                                                                        â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ PHASE 3: Testing & Refinement                                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚ 3.1 Backend Testing Checklist                                                                                                   â”‚     â”‚                                                                                                                                 â”‚     â”‚ - Health endpoint responds                                                                                                      â”‚     â”‚ - Cultural Hub returns results with sources                                                                                     â”‚     â”‚ - Visual Bridge translates images                                                                                               â”‚     â”‚ - Emergency phrases return for all categories                                                                                   â”‚     â”‚ - WebSocket connects successfully                                                                                               â”‚     â”‚ - Audio chunks are received and forwarded                                                                                       â”‚     â”‚ - Transcriptions are sent to client                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ 3.2 Frontend Testing Checklist                                                                                                  â”‚     â”‚                                                                                                                                 â”‚     â”‚ - Dashboard cards are clickable                                                                                                 â”‚     â”‚ - All 4 screens navigate correctly                                                                                              â”‚     â”‚ - Emergency phrases load and display                                                                                            â”‚     â”‚ - Cultural Hub search works                                                                                                     â”‚     â”‚ - Visual Bridge camera/gallery works                                                                                            â”‚     â”‚ - Live Classroom connects and records                                                                                           â”‚     â”‚ - Messages display with smooth scroll                                                                                           â”‚     â”‚ - Audio playback works                                                                                                          â”‚     â”‚ - Fresh Mint theme consistent throughout                                                                                        â”‚     â”‚                                                                                                                                 â”‚     â”‚ 3.3 Integration Testing                                                                                                         â”‚     â”‚                                                                                                                                 â”‚     â”‚ - End-to-end classroom session (5 minutes)                                                                                      â”‚     â”‚ - Audio quality is clear                                                                                                        â”‚     â”‚ - Transcription accuracy > 90%                                                                                                  â”‚     â”‚ - No memory leaks in long sessions                                                                                              â”‚     â”‚ - App survives backgrounding                                                                                                    â”‚     â”‚ - Network errors handled gracefully                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ Critical Files Summary                                                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚ Backend Files to Create (18 files):                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ 1. backend/src/index.ts - Express server with WebSocket                                                                         â”‚     â”‚ 2. backend/src/config/gemini.ts - Gemini client                                                                                 â”‚     â”‚ 3. backend/src/config/constants.ts - System instruction + emergency phrases                                                     â”‚     â”‚ 4. backend/src/middleware/auth.ts - Clerk JWT                                                                                   â”‚     â”‚ 5. backend/src/middleware/errorHandler.ts - Error handling                                                                      â”‚     â”‚ 6. backend/src/services/liveClassroom.ts - WebSocket + Gemini 2.5 Flash                                                         â”‚     â”‚ 7. backend/src/services/culturalHub.ts - Gemini 3 Flash + Search                                                                â”‚     â”‚ 8. backend/src/services/visualBridge.ts - Gemini Vision                                                                         â”‚     â”‚ 9. backend/src/services/emergencyHelp.ts - Static phrases                                                                       â”‚     â”‚ 10. backend/src/services/audioUtils.ts - Audio conversion                                                                       â”‚     â”‚ 11. backend/src/routes/classroom.ts - Classroom routes                                                                          â”‚     â”‚ 12. backend/src/routes/cultural.ts - Cultural routes                                                                            â”‚     â”‚ 13. backend/src/routes/visual.ts - Visual routes                                                                                â”‚     â”‚ 14. backend/src/routes/emergency.ts - Emergency routes                                                                          â”‚     â”‚ 15. backend/src/types/index.ts - TypeScript types                                                                               â”‚     â”‚ 16. backend/src/utils/sessionManager.ts - Session storage                                                                       â”‚     â”‚ 17. backend/tsconfig.json - TypeScript config                                                                                   â”‚     â”‚ 18. Update backend/package.json - Scripts                                                                                       â”‚     â”‚                                                                                                                                 â”‚     â”‚ Frontend Files to Create/Update (7 files):                                                                                      â”‚     â”‚                                                                                                                                 â”‚     â”‚ 1. services/api.ts - API service layer                                                                                          â”‚     â”‚ 2. app/(tabs)/classroom.tsx - Live Classroom screen                                                                             â”‚     â”‚ 3. app/(tabs)/cultural-hub.tsx - Cultural Hub screen                                                                            â”‚     â”‚ 4. app/(tabs)/visual-bridge.tsx - Visual Bridge screen                                                                          â”‚     â”‚ 5. app/(tabs)/emergency-help.tsx - Emergency Help screen                                                                        â”‚     â”‚ 6. Update app/(tabs)/home.tsx - Make cards clickable (lines 163-209)                                                            â”‚     â”‚ 7. Update app/(tabs)/_layout.tsx - Add screen routes                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚ Configuration Updates (1 file):                                                                                                 â”‚     â”‚                                                                                                                                 â”‚     â”‚ 1. Update app.json - Add camera/microphone permissions                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ Implementation Order                                                                                                            â”‚     â”‚                                                                                                                                 â”‚     â”‚ 1. Day 1-2: Backend Core (index.ts, services, routes)                                                                           â”‚     â”‚ 2. Day 2-3: Backend Testing (Postman/curl tests)                                                                                â”‚     â”‚ 3. Day 3: Emergency Help (Frontend + Backend - simplest feature)                                                                â”‚     â”‚ 4. Day 4: Cultural Hub (Frontend + Backend integration)                                                                         â”‚     â”‚ 5. Day 5: Visual Bridge (Camera + Backend integration)                                                                          â”‚     â”‚ 6. Day 6-7: Live Classroom (WebSocket + Audio - most complex)                                                                   â”‚     â”‚ 7. Day 8: Testing & Polish (E2E tests, UI refinement)                                                                           â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ Key Technical Notes                                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ Audio Format                                                                                                                    â”‚     â”‚                                                                                                                                 â”‚     â”‚ - Mobile Recording: CAF (iOS) / M4A (Android) @ 16kHz mono                                                                      â”‚     â”‚ - Backend Processing: Convert to PCM Float32Array                                                                               â”‚     â”‚ - Gemini Input: Base64 PCM @ 16kHz                                                                                              â”‚     â”‚ - Gemini Output: Base64 PCM @ 24kHz                                                                                             â”‚     â”‚ - Mobile Playback: Decode and play via expo-audio                                                                               â”‚     â”‚                                                                                                                                 â”‚     â”‚ WebSocket Protocol                                                                                                              â”‚     â”‚                                                                                                                                 â”‚     â”‚ Client â†’ Server:                                                                                                                â”‚     â”‚ - { type: 'audio', data: 'base64...' }                                                                                          â”‚     â”‚                                                                                                                                 â”‚     â”‚ Server â†’ Client:                                                                                                                â”‚     â”‚ - { type: 'audio', data: 'base64...' }                                                                                          â”‚     â”‚ - { type: 'input_transcript', text: '...' }                                                                                     â”‚     â”‚ - { type: 'output_transcript', text: '...' }                                                                                    â”‚     â”‚ - { type: 'turn_complete' }                                                                                                     â”‚     â”‚ - { type: 'connected' }                                                                                                         â”‚     â”‚ - { type: 'error', message: '...' }                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ Fresh Mint Theme                                                                                                                â”‚     â”‚                                                                                                                                â”‚
     â”‚ - Background: #F0FFF4                                                                                                           â”‚     â”‚ - Accent: #10B981                                                                                                               â”‚     â”‚ - Card: #F9FFFB                                                                                                                 â”‚     â”‚ - Inactive: rgba(16, 185, 129, 0.3)                                                                                             â”‚     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ Success Criteria                                                                                                                â”‚     â”‚                                                                                                                                 â”‚     â”‚ âœ… Backend running and all 4 endpoints working                                                                                  â”‚ 
     â”‚ âœ… Dashboard cards navigate to feature screens                                                                                  â”‚ 
     â”‚ âœ… Emergency phrases display correctly                                                                                          â”‚ 
     â”‚ âœ… Cultural Hub returns search results with sources                                                                             â”‚ 
     â”‚ âœ… Visual Bridge translates captured images                                                                                     â”‚ 
     â”‚ âœ… Live Classroom connects and streams audio                                                                                    â”‚ 
     â”‚ âœ… Transcriptions appear in real-time                                                                                           â”‚ 
     â”‚ âœ… Message bubbles styled per Fresh Mint theme                                                                                  â”‚ 
     â”‚ âœ… Smooth auto-scrolling in classroom                                                                                           â”‚ 
     â”‚ âœ… No crashes or memory leaks                                                                                                   â”‚ 
     â”‚                                                                                                                                 â”‚     â”‚ ---                                                                                                                             â”‚     â”‚ End of Implementation Plan                                                                                                      â”‚     â”‚                                                                                                                                 â”‚     â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

> Nice plan we are using model gemini-2.5-flash-native-audio-preview-12-2025 for realtime classroom .
  âŽ¿  â§‰ Selected 1 lines from workingcode\app.md in Visual Studio Code

â— Perfect! Yes, that's exactly right. The plan uses gemini-2.5-flash-native-audio-preview-12-2025 for the Live Classroom feature, which
is the same model used in your working web code.

  This model is specifically designed for:

- âœ… Real-time bidirectional audio streaming
- âœ… Low-latency voice interaction
- âœ… Native audio input/output (16kHz input, 24kHz output)
- âœ… Simultaneous transcription (both user and AI speech)
- âœ… Interruption handling (user can interrupt AI)

  The other models in the plan:

- Gemini 3 Flash (gemini-3-flash-preview) - Cultural Knowledge Hub with Google Search grounding
- Gemini 2.5 Pro (gemini-2.5-pro-preview) - Visual Sign Bridge for image translation

  ---
  Would you like me to:

  1. Start implementing the backend now (beginning with the core files)?
  2. Make any changes to the plan first?
  3. Create a specific feature (like Emergency Help to test the flow)?

  Just let me know and I'll get started! ðŸš€
